version: 2.1

jobs:
  build:
    docker:
      # Ubuntu 24.04 zoals de opdracht vereist
      - image: ubuntu:24.04

    steps:
      # Haal je code binnen
      - checkout

      # Installeer dependencies
      - run:
          name: Install dependencies
          command: |
            apt-get update
            apt-get install -y \
              cmake \
              g++ \
              libsfml-dev \
              git \
              build-essential

      # Maak build directory
      - run:
          name: Create build directory
          command: mkdir -p build

      # Run CMake
      - run:
          name: Configure with CMake
          command: |
            cd build
            cmake ..

      # Compile het project
      - run:
          name: Build project
          command: |
            cd build
            cmake --build . --config Release

      # Check of executable bestaat
      - run:
          name: Verify build output
          command: |
            cd build
            ls -la
            # Pas "PacmanSFML" aan naar jouw executable naam
            test -f PacmanSFML || test -f Pacman_Project || echo "Checking for any executable..."
            ls -la | grep -E '\.(out|exe)$' || ls -la *

workflows:
  version: 2
  build-and-test:
    jobs:
      - build